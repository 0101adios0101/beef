language: ruby
rvm:
- 2.5.3
- 2.6.0
- 2.6.3
- 2.6.5
- 2.7.0
branches:
  only:
  - master
  - browserstack
before_script:
  - RUBY_VERSION=/bin/bash rvm current
  - sed -i -E 's/system\((.*?)\)/""/g' /home/travis/.rvm/gems/$RUBY_VERSION/gems/browserstack-local-1.3.0/lib/browserstack/local.rb
env:
  - CONFIG_FILE=osx/catalina/catalina_chrome_39.config.yml
  - CONFIG_FILE=osx/catalina/catalina_chrome_59.config.yml
  - CONFIG_FILE=osx/catalina/catalina_chrome_81.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_11.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_68esr.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_75.config.yml
  - CONFIG_FILE=osx/catalina/catalina_safari_13.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_chrome_14.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_chrome_81.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_firefox_5.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_firefox_75.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_safari_9-1.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_14.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_35.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_49.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_5.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_38esr.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_42.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_safari_5-1.config.yml
  - CONFIG_FILE=windows/win_10/win10_chrome_37.config.yml
  - CONFIG_FILE=windows/win_10/win10_chrome_59.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_32.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_68esr.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_75.config.yml
  - CONFIG_FILE=windows/win_10/win10_edge_81.config.yml
  - CONFIG_FILE=windows/win_10/win10_ie_11.config.yml
  - CONFIG_FILE=windows/win_8/win8_chrome_22.config.yml
  - CONFIG_FILE=windows/win_8/win8_chrome_81.config.yml
  - CONFIG_FILE=windows/win_8/win8_firefox_32.config.yml
  - CONFIG_FILE=windows/win_8/win8_firefox_75.config.yml
  - CONFIG_FILE=windows/win_8/win8_edge_81.config.yml
  - CONFIG_FILE=windows/win_8/win8_ie_10.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_14.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_28.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_43.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_5.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_45esr.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_47.config.yml
  - CONFIG_FILE=windows/xp/xp_ie_7.config.yml
jobs:
  include:
    - name: "Full Test Suite 2.5.3"
      rvm: 2.5.3
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.0"
      rvm: 2.6.0
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.3"
      rvm: 2.6.3
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.5"
      rvm: 2.6.5
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.7.0"
      rvm: 2.7.0
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
script:
  - bundle exec rspec --tag run_on_browserstack
addons:
  apt:
    packages:
    - libsqlite3-dev
    - build-essential
    - patch
    - ruby-dev
    - zlib1g-dev
    - liblzma-dev
    - libcurl4-openssl-dev
  browserstack:
    username:
      secure: "EFMy1JEXjVqL9cWNL73T1lDF+3sSt1oVX335zKqW9UfaClOHatff74SIOh6DDkJfwtHGE/HIyqSb+nsuC0iomMOW8vJnM73XmiGThfDXjJjxu3i0hy/cCJzrcnCa7eGe9PFuy3FgDL5vI8kPzI5mZv/h+QhuRx4tVP30m1fdIns+CNcTTnYdlMAFBMrrr7UADc78ZojlZpTAd0JHb2zNUQPd30g0QYE3oXxm/U7mFIUAZU7vvSO7X6k3jF+1iizNJr8Bj/wEx8VkTiRGVHqZ3A9asdrtg+Btbf+f2xrzJpVK9SWbod5vqix1g+KMuQVEEFQC7scf40nJQc0RNx1R9unNWZ6wt6W8skbVBlRvEfgMcYWO5+FbJwsyTgMy4nClBJts/JT4XCMIgvEzI6v291TkFy5LDgVSL88auhzMAsTYZQhcthSSrTc646YAJG0S+JKspQxtnSG81BN48PatFiv2zx6uCvFeoTi2DpjiHSA6LnVZdnqtJP7VAaUtK7vKtG0yE6BaGfcOMK2/XwIZI1SGAJoH6ZO90Z130WutLTt086CL0jE3G2r0s9GRDcj6Uh0+oTMTyK0v444Cj1vOI4ZrMlPa7iqn/wM5atSVhPLmTONucxQb+RNRVqA8IxO7E66kz1DpfS4ktvUy/k19H97WryrgiJBBzmOyBlrmWMs="
    access_key:
      secure: "PKwtXUrC7ExK2gjKcEpLEpO3GVGWFQfYLtZLVXt1WnAMttx3uzc6t1cGjIb+vuItv5H9DPNrjdSTnDsPKIcf3n/WViAYhf5EYNraQsHEZ3R4Xqld2nNiqQvQHkjL0uwXu9LZiodBaEZ9X4D3VbUKuV6yllbvcfFG0z+vLIVZIauTYfy6n7LLxl8Y02mK8qnfebbiL8cO976e2ntIdl6SRIUADxlteWo8ToHXiILmEHE4H9jjQ2AIN2uJ0HKDLS/LJ7xrOZlfVxsalPcoDjhkauHZOp/6WbzmOuB2/ifQfzl66yDgX0eQ/YjR9I3CHtegtKp83I+EKQe4pGJ7p04erCEQ5BbMXSawf9TkPrcBvmYsdCTsKhIAVMjVM13X/Lnu4uph3iues5PTVl54V5FDYIMF/QGwy2lJUZhQ4A4Dp/dvxL1mHzYjM9Z3w84dGWn8Juj+CRWLNSCquZYeaJV6wzuD6iSbU3CNrvO2LfpegKEvbG9g1X/nJ69SJKzcVkctd56VFYl6Xdh9gxVdYfBvHNZOG7NTP4GGbZ6lpGIllSuqRfE1I5bLxX3WeYpyYULTdBBol03iNgdkI4e5LVOW78Xk83Hlldh2JF3eBME9KHUfLjyuf7ZHHBcfYfbRokz7wQouoabhHxTR3FUbaG4k8s4imvnmf6W9d8KUMz2Z1/U="
