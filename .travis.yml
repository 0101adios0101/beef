language: ruby
rvm:
- 2.5.3
- 2.6.0
- 2.6.3
- 2.6.5
- 2.7.0
branches:
  only:
  - master
  - browserstack
before_script:
  - RUBY_VERSION=/bin/bash rvm current
  - sed -i -E 's/system\((.*?)\)/""/g' /home/travis/.rvm/gems/$RUBY_VERSION/gems/browserstack-local-1.3.0/lib/browserstack/local.rb
env:
  - CONFIG_FILE=osx/catalina/catalina_chrome_39.config.yml
  - CONFIG_FILE=osx/catalina/catalina_chrome_59.config.yml
  - CONFIG_FILE=osx/catalina/catalina_chrome_81.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_11.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_68esr.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_75.config.yml
  - CONFIG_FILE=osx/catalina/catalina_safari_13.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_chrome_14.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_chrome_81.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_firefox_5.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_firefox_75.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_safari_9-1.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_14.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_35.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_49.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_5.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_38esr.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_42.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_safari_5-1.config.yml
  - CONFIG_FILE=windows/win_10/win10_chrome_37.config.yml
  - CONFIG_FILE=windows/win_10/win10_chrome_59.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_32.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_68esr.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_75.config.yml
  - CONFIG_FILE=windows/win_10/win10_edge_81.config.yml
  - CONFIG_FILE=windows/win_10/win10_ie_11.config.yml
  - CONFIG_FILE=windows/win_8/win8_chrome_22.config.yml
  - CONFIG_FILE=windows/win_8/win8_chrome_81.config.yml
  - CONFIG_FILE=windows/win_8/win8_firefox_32.config.yml
  - CONFIG_FILE=windows/win_8/win8_firefox_75.config.yml
  - CONFIG_FILE=windows/win_8/win8_edge_81.config.yml
  - CONFIG_FILE=windows/win_8/win8_ie_10.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_14.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_28.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_43.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_5.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_45esr.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_47.config.yml
  - CONFIG_FILE=windows/xp/xp_ie_7.config.yml
jobs:
  include:
    - name: "Full Test Suite 2.5.3"
      rvm: 2.5.3
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.0"
      rvm: 2.6.0
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.3"
      rvm: 2.6.3
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.5"
      rvm: 2.6.5
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.7.0"
      rvm: 2.7.0
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
script:
  - bundle exec rspec --tag run_on_browserstack
addons:
  apt:
    packages:
    - libsqlite3-dev
    - build-essential
    - patch
    - ruby-dev
    - zlib1g-dev
    - liblzma-dev
    - libcurl4-openssl-dev
  browserstack:
    username:
      secure: "Ffiw/hh7pze6cVsxGqmIj0JfmMNwKJFx8PNOlKJTQQb4PHoK6RQXQlUAlJcHY8AyNCCDirzrvlr/N2NwTNn3jsTTS1RmLZ8ge6h7eAy70zBYHAILeDrwL1iV8NzndO5pqoLco31Ib2IpbJxz/BT4XXnuHTLromLJHB3sK6UtRFYbVB4KvQ1VEKyl6UNVHdweOoDNBYMDNrJku4xBIVJtBD+fZiA3dmkMP+qGb6anO1NbBmQjqwJVpKR5cpKrrAdkT+FPfYAEr/R3YiDAB35UBZm89gJt68USacvHk6BjhKrdhDrj7QDKkhnevfBCWzbPJHyW6+KrX3/ZiR9zUXf+ptpY9XNP2DoZYlschv2cNOE5hjKTscDJ+caVpvwq3t2ZVDHFVVSuLWHeWuarklxOdhP6ieC9Hzqcc1rFGJbw9KEFg3Vjgj5KT1saPy2UEKDcu4BAmDV97h1d5t5UY4mRxX5ocOFmVgStSBwkIS4ObnpgJh4eImUrG2v6347F6GhjGCV8Q6/raYa7skHmgcWbo+dZX5bnCbUBQcNaTAzhJeRUhyygZeESyDVqWYRUTA6WPx7mtEIGOO3jfJc5P+I/lEFnAazEKw+S7v/B3Myr5lZq+AeLg7JGc60qWGis0YYUADFyYnWvWY5ld2yP4SqoOw611deFM0g40HfnWuwvRng="
    access_key:
      secure: "iNiQpJkL1v26A2q3xsel0Wpt6bjkN8iMVGiu4a1S0B9U0VjLdS74qrfXUWA6bbiNEi2qQWeIKxcuXZvPpuiXMQpDji9upFtwyfE6hJ5A0tADPF3pnhnHFEL3dlLM5vI1fq4J4xkI/LdStRXG8szKBCyuTPC8EPxdcH8z79FbP+QErRPVCVXd8CHcEBuGRKCGVMMBF9IhTZeMSctnkwbHlNntQLbZ2IO4QQgLzpklXP2wpwM9GzOe3+ou9N1RKUrm4WrJ5f8GQ7rBWt8Yi8YPJUCNOPxqhGnYS7b4KUExZxtm8cRUVTaQKA5iXnWczsahrnk/wve8FGb4zhsYDE6DtbwBtK5b2rhRoLhJ+7s6/sMbyEKMUX2xnm9pghFUqvR4pqx3WpeU4SV+SWK0wJTwOrBvfVgpHchQlcEAgUCZBuh1GDFsVFng36qrlUp2xC8+t4ew5cE+N7mKEM7+XGxiyJU1exMsqh6Y5hotpzV+CNFzI8YIVUJVYIErTec+og2u4EX/qgl3uTtBjuSLmLBNQVRFeSsZDnUyVBuK0Yv35ibepeK7121zGQ/ci5bZy6EBjLuQ752P0NdiMOZ15yS78AhLkFAaiN/lUpwvIpCJP2IzfatHF9V7bEqoUnP2RR2nr0dz5ymrGNhaexyNXVRNisgjNqD/zaZ2W98Et7yVhRY="