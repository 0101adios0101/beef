language: ruby
rvm:
- 2.5.3
- 2.6.0
- 2.6.3
- 2.6.5
- 2.7.0
branches:
  only:
  - master
  - browserstack
before_script:
  - RUBY_VERSION=/bin/bash rvm current
  - sed -i -E 's/system\((.*?)\)/""/g' /home/travis/.rvm/gems/$RUBY_VERSION/gems/browserstack-local-1.3.0/lib/browserstack/local.rb
env:
  - CONFIG_FILE=osx/catalina/catalina_chrome_39.config.yml
  - CONFIG_FILE=osx/catalina/catalina_chrome_59.config.yml
  - CONFIG_FILE=osx/catalina/catalina_chrome_81.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_11.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_68esr.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_75.config.yml
  - CONFIG_FILE=osx/catalina/catalina_safari_13.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_chrome_14.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_chrome_81.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_firefox_5.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_firefox_75.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_safari_9-1.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_14.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_35.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_49.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_5.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_38esr.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_42.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_safari_5-1.config.yml
  - CONFIG_FILE=windows/win_10/win10_chrome_37.config.yml
  - CONFIG_FILE=windows/win_10/win10_chrome_59.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_32.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_68esr.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_75.config.yml
  - CONFIG_FILE=windows/win_10/win10_edge_81.config.yml
  - CONFIG_FILE=windows/win_10/win10_ie_11.config.yml
  - CONFIG_FILE=windows/win_8/win8_chrome_22.config.yml
  - CONFIG_FILE=windows/win_8/win8_chrome_81.config.yml
  - CONFIG_FILE=windows/win_8/win8_firefox_32.config.yml
  - CONFIG_FILE=windows/win_8/win8_firefox_75.config.yml
  - CONFIG_FILE=windows/win_8/win8_edge_81.config.yml
  - CONFIG_FILE=windows/win_8/win8_ie_10.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_14.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_28.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_43.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_5.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_45esr.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_47.config.yml
  - CONFIG_FILE=windows/xp/xp_ie_7.config.yml
jobs:
  include:
    - name: "Full Test Suite 2.5.3"
      rvm: 2.5.3
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.0"
      rvm: 2.6.0
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.3"
      rvm: 2.6.3
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.5"
      rvm: 2.6.5
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.7.0"
      rvm: 2.7.0
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
script:
  - bundle exec rspec --tag run_on_browserstack
addons:
  apt:
    packages:
    - libsqlite3-dev
    - build-essential
    - patch
    - ruby-dev
    - zlib1g-dev
    - liblzma-dev
    - libcurl4-openssl-dev
  browserstack:
    username:
      secure: "nAQ47X1VFRqfC/fWqemkrCnHbv5TLG426GjW27kqrciTD1id6I4nNX0xx9r8UMM4SwyTOxBAXI2bErnqVYQi/Cempp6nJ1TlXWu7AZAFkqxwOJRfEA7S8nG0juKDlejIqu6WWDi+M0cAw7iHWQm4TC9NotOogd+3OXaeXoW8hWL48Obpqsb3kSnidwwLIDOhsfM3cHohOSNDfB2TQx9xFT7LEypOamg0NLYrqX9P4c+qd6B8uNFZ/WzpvnMG3K/M/GS8fUO/a/QHZcX95ak05rZzlKjqz1SHzSls+tMcEn0Nuj3917UWT+ZSAlfG9pTdXsfu985zzUR2uWA1wKYoc7/cE5mJxNYKJweYBEKfYpCmf4vAfKl/KfpNHW1JQBRSvw8ITy6RdFNbsdrKx3Z42aL1xZosv30azUgrf2jXITvzyIk4hVhyePOWIJZgP5ngZmV90A1iOR5JfiwpoOds6ftyif/AmzWEhkXnpBcBIxzxCi1nN+o4MNejCvunz+mcR281msUpnQdjgK1cA5Vj5zD/FZtblLC4Rv69GM7ixF8Im3dnoqPnI+jMxgGL7X5ByJMhPSqiPjR8MYWgPh6JSpMSK9XATDOpWiiFLfrF0xW9BHQkmmJk+j9vIc9P+zVwn8s3e4+oDW+AcSUQWJg9CYVlAZUJRMZQBTvJBarm8vU="
    access_key:
      secure: "h/qBVjrMIqGuyeQLa+aqRPvUqGSVcnAXbJeZIuRGPhIbLOfPFiclNIFKmKggpcW3dG30caAVO9Ev2gWhjXgpPhehhuBJ43+WzoB/y4oJThjf5yKSv8i/1NadSl0P2DaZFDM9nLYyCLBqgCkmf0MnS7Dy2IMHqqyRt/23IOe3gxFkWwehWbtpDDLm4MvWyarUiFc6w56zQRTokfrSjlCIBrTohZ52QYzZNAhcietfjiuWKOEB8hNnTzFWnl8Qj4L7f43U7imyISRGV8outUR0ADx6lclNNlBwQQ27HysDU70o/Uh4m26BKL1HaVGZVNMEke5KRTM1PXgKI2tLk4i++FduZt5EspoAfZ8fjxMCEgYRgB4ZDSdChIgEqP+R8S3tE+qbhadbUpRYZT/6zYLXKTdC2aunv3kIl57TH/nD+NVvstam/QXqn0AoRSybUXhWs5Bfnu9th86i9n7C9sBNVkqXkxgS+GJHr0+lQ+7LoJJppKVoVMwlnRBh5ovr4X2OmnuaFlmIEjc5qmMxJpFA33qjYwTW+sRlCk4Ts7dDXObtEACbQ+Op80qOKh/FdBu2FoA9lLUEaDN3Bb+69Z5IeePMqS8nv3Ve62zVdF0RI7KPfFMTV7JZRi6chIMnIcUPz+8EnY0xMvTJd5Yn6p5AECZKSTaDh9z9BSolxbDnvt8="
