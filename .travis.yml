language: ruby
rvm:
- 2.5.3
- 2.6.0
- 2.6.3
- 2.6.5
- 2.7.0
branches:
  only:
  - master
  - browserstack
before_script:
  - RUBY_VERSION=/bin/bash rvm current
  - sed -i -E 's/system\((.*?)\)/""/g' /home/travis/.rvm/gems/$RUBY_VERSION/gems/browserstack-local-1.3.0/lib/browserstack/local.rb
env:
  - CONFIG_FILE=osx/catalina/catalina_chrome_39.config.yml
  - CONFIG_FILE=osx/catalina/catalina_chrome_59.config.yml
  - CONFIG_FILE=osx/catalina/catalina_chrome_81.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_11.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_68esr.config.yml
  - CONFIG_FILE=osx/catalina/catalina_firefox_75.config.yml
  - CONFIG_FILE=osx/catalina/catalina_safari_13.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_chrome_14.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_chrome_81.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_firefox_5.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_firefox_75.config.yml
  - CONFIG_FILE=osx/el_capitan/elcapitan_safari_9-1.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_14.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_35.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_chrome_49.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_5.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_38esr.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_firefox_42.config.yml
  - CONFIG_FILE=osx/snow_leopard/snowleopard_safari_5-1.config.yml
  - CONFIG_FILE=windows/win_10/win10_chrome_37.config.yml
  - CONFIG_FILE=windows/win_10/win10_chrome_59.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_32.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_68esr.config.yml
  - CONFIG_FILE=windows/win_10/win10_firefox_75.config.yml
  - CONFIG_FILE=windows/win_10/win10_edge_81.config.yml
  - CONFIG_FILE=windows/win_10/win10_ie_11.config.yml
  - CONFIG_FILE=windows/win_8/win8_chrome_22.config.yml
  - CONFIG_FILE=windows/win_8/win8_chrome_81.config.yml
  - CONFIG_FILE=windows/win_8/win8_firefox_32.config.yml
  - CONFIG_FILE=windows/win_8/win8_firefox_75.config.yml
  - CONFIG_FILE=windows/win_8/win8_edge_81.config.yml
  - CONFIG_FILE=windows/win_8/win8_ie_10.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_14.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_28.config.yml
  - CONFIG_FILE=windows/xp/xp_chrome_43.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_5.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_45esr.config.yml
  - CONFIG_FILE=windows/xp/xp_firefox_47.config.yml
  - CONFIG_FILE=windows/xp/xp_ie_7.config.yml
jobs:
  include:
    - name: "Full Test Suite 2.5.3"
      rvm: 2.5.3
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.0"
      rvm: 2.6.0
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.3"
      rvm: 2.6.3
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.6.5"
      rvm: 2.6.5
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
    - name: "Full Test Suite 2.7.0"
      rvm: 2.7.0
      env: CONFIG_FILE=windows/win_10/win10_chrome_81.config.yml
      script: bundle exec rake
script:
  - bundle exec rspec --tag run_on_browserstack
addons:
  apt:
    packages:
    - libsqlite3-dev
    - build-essential
    - patch
    - ruby-dev
    - zlib1g-dev
    - liblzma-dev
    - libcurl4-openssl-dev
  browserstack:
    username:
      secure: "hYC/o/mjYMnnNXuP1arA/zSZF+is9CBtlyXavcjUz6c5ZXzQ8RWlwJBBeJatmB0mzoOVnKsl1vf8N9zqOn76MxxOV0Dc+RNuuFdttM6ZakXj0kn9mliXp3nzN3gYyNPfqECOgOKzQ7a84jjVr1NCeByLRaHe6Gfq2Jc3wwg2L/R1m2UmAMnEyJq7zfrOEy67WcnuxkGHD3oCJ3yVbVDXIZfvoq+5erxhALwyoDoMmkHMnK2taPM3kQGHBnI/3EPaYYyAT4H0lfanGfLNLFevn8nZnk5FUXP9Qgngc27ELeDYsizOUU811GOZZmictYkvQKAY+wHR7Mvwi3ajy/gGuApu9FYXptt0NV2M2KAke2XxDddKao58MJTfOpAQYjIIcFu3P/8+V6hrIe3EY0HU+Eb+jfoPw0F+GTSP0Db7wL3tAQA6wux01SJmgbkL66oz9hqD9y7ixmwjq9aLzDcRgvFS8lefvd1IuQvI7FSLKEb564//KAkzQoWWZqUgUpy8Un30eTD8Kpi3eQWKtVsf1sOK7QIMB9eVCGTb/rnse5om3TbceT2m2ieT/7kNoWkA5cYjWWJELn8uVvx666lYM/8uxhHtR/w3csf+pr9hBAnaYamIn2KbOoqVZQnykDSRicY1V3/gGgxzZIGy8oUX4z3WDyXwXzWLx46zjmJc1vE="
    access_key:
      secure: "Utv7nUvQ05gq15Hp9E4uP91kkBw7VpekSiXuQ21M7SPnF+2umRccH9v471Rrfa84/KmzjBcF5AHMjEeBATZCjenhyMzLlCHXa/WFbEb4zMFLwmAiKmIvY2T+xfPKE6HcCO+HfQJy8q/sP/H2nS0WwwvYvLz0Poi3Wh3miUT7B/tCz7f+y3mC1fqsGJZMCPEMpj2BIeCpKY8FZ5qkdoE1dpVgRUBmYCu4R3S7r9CYTa9E5CIQvrsGG8R9eX+LyAmB7EpHzcE/hpJ6BAcUwbAWtYA9Zpv9lqrv0Km5QxlIotAjMjzP+qCWeCqrVUOYavR54bsl/4kh5w6rXjwVlZKPtMol7b3k49fpNDzYMHD+kYxJfYheQJS08Me0wmCKI+Xc3S4ODzI+c0cmijf2VkbEwAJ9oAF38M/pMa3uSKrYnJGcc7xgdqNF3On22x36L2wANDMJlaqK7bdvlwtHtrceHVG9KSJ7YkNoLbHQtyUUrV/ES1hmwUncKiWW7KIZKZFmbyHRbPg4CKejjopaS/0jpYfTWr++YBigf0SJ0w76Wty1DEfSXoasMT6Ruk1ZPdd1gI8wR27P0+OTCorEznK2OhE9IzAfbo74mrbQI3LjDSEsQ18BZwl0cAutfJiJkG9NF38oWyPG266vJOrGuXybzBk0X0xtdWLcWOgqPia8FEU="